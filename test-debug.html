<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –î–µ–º–æ–Ω-–ì–∞–π–¥</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #e8e8e8; }
        .test { margin: 20px 0; padding: 15px; background: #2a2a2a; border: 2px solid #8b4049; border-radius: 10px; }
        .pass { border-color: #5a7a5a; }
        .fail { border-color: #c85050; }
        h2 { color: #e8b896; }
        .result { margin: 5px 0; font-size: 14px; }
        button { padding: 10px 20px; background: #8b4049; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>üîç –î–µ–º–æ–Ω-–ì–∞–π–¥ - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h1>
    
    <div class="test" id="test1">
        <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ LocalStorage</h2>
        <div class="result" id="result1">–ü—Ä–æ–≤–µ—Ä—è—é...</div>
    </div>
    
    <div class="test" id="test2">
        <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
        <div class="result" id="result2">–ü—Ä–æ–≤–µ—Ä—è—é...</div>
    </div>
    
    <div class="test" id="test3">
        <h2>3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–≤–µ—Å—Ç–æ–≤</h2>
        <div class="result" id="result3">–ü—Ä–æ–≤–µ—Ä—è—é...</div>
    </div>
    
    <div class="test" id="test4">
        <h2>4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤</h2>
        <div class="result" id="result4">–ü—Ä–æ–≤–µ—Ä—è—é...</div>
    </div>
    
    <div class="test">
        <h2>‚öôÔ∏è –î–µ–π—Å—Ç–≤–∏—è</h2>
        <button onclick="showData()">–ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <button onclick="resetAll()">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
        <button onclick="createDefault()">–°–æ–∑–¥–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç</button>
    </div>
    
    <div class="test">
        <h2>üìä –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö:</h2>
        <pre id="dataOutput" style="color:#9ac99a; font-size:12px; overflow:auto;"></pre>
    </div>
    
    <script>
        // Test 1: LocalStorage
        try {
            localStorage.setItem('test', 'ok');
            const val = localStorage.getItem('test');
            if(val === 'ok') {
                document.getElementById('result1').innerHTML = '‚úÖ LocalStorage —Ä–∞–±–æ—Ç–∞–µ—Ç';
                document.getElementById('test1').classList.add('pass');
            } else {
                throw new Error('Read failed');
            }
        } catch(e) {
            document.getElementById('result1').innerHTML = '‚ùå LocalStorage –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç: ' + e.message;
            document.getElementById('test1').classList.add('fail');
        }
        
        // Test 2: Data exists
        const saved = localStorage.getItem('demonDataV3');
        if(saved) {
            try {
                const data = JSON.parse(saved);
                document.getElementById('result2').innerHTML = '‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–∞–π–¥–µ–Ω—ã: ' + (saved.length / 1024).toFixed(1) + ' KB';
                document.getElementById('test2').classList.add('pass');
            } catch(e) {
                document.getElementById('result2').innerHTML = '‚ùå –î–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã: ' + e.message;
                document.getElementById('test2').classList.add('fail');
            }
        } else {
            document.getElementById('result2').innerHTML = '‚ö†Ô∏è –î–∞–Ω–Ω—ã—Ö –Ω–µ—Ç (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫?)';
        }
        
        // Test 3: Quests
        if(saved) {
            const data = JSON.parse(saved);
            if(data.quests && data.quests.length > 0) {
                document.getElementById('result3').innerHTML = `‚úÖ –ö–≤–µ—Å—Ç—ã: ${data.quests.length} —à—Ç.`;
                document.getElementById('test3').classList.add('pass');
            } else {
                document.getElementById('result3').innerHTML = '‚ùå –ö–≤–µ—Å—Ç–æ–≤ –Ω–µ—Ç!';
                document.getElementById('test3').classList.add('fail');
            }
        } else {
            document.getElementById('result3').innerHTML = '‚ö†Ô∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
        }
        
        // Test 4: Finance
        if(saved) {
            const data = JSON.parse(saved);
            if(data.piggyBanks && data.piggyBanks.length > 0) {
                document.getElementById('result4').innerHTML = `‚úÖ –ö–æ–ø–∏–ª–∫–∏: ${data.piggyBanks.length} —à—Ç., –ë–∞–ª–∞–Ω—Å: ${data.balance} z≈Ç`;
                document.getElementById('test4').classList.add('pass');
            } else {
                document.getElementById('result4').innerHTML = '‚ùå –ö–æ–ø–∏–ª–æ–∫ –Ω–µ—Ç!';
                document.getElementById('test4').classList.add('fail');
            }
        } else {
            document.getElementById('result4').innerHTML = '‚ö†Ô∏è –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
        }
        
        function showData() {
            const saved = localStorage.getItem('demonDataV3');
            if(saved) {
                const data = JSON.parse(saved);
                document.getElementById('dataOutput').textContent = JSON.stringify(data, null, 2);
            } else {
                document.getElementById('dataOutput').textContent = '–î–∞–Ω–Ω—ã—Ö –Ω–µ—Ç';
            }
        }
        
        function resetAll() {
            if(confirm('–£–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ?')) {
                localStorage.removeItem('demonDataV3');
                alert('–î–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                location.reload();
            }
        }
        
        function createDefault() {
            const defaultData = {
                level: 5,
                xp: 0,
                blood: 0,
                balance: 0,
                quests: [
                    {id:1,title:'–ü—Ä–æ–≤–µ—Ä—å –°–æ–æ–±—â–µ–Ω–∏—è',desc:'Instagram –∏ SMS',hint:'–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç = –±–æ–ª—å—à–µ –∫–ª–∏–µ–Ω—Ç–æ–≤',reward:10,xp:15,period:'4h',done:false,streak:0},
                    {id:2,title:'–ü–æ—Å—Ç –æ –î–∞—Ç–∞—Ö',desc:'–°—Ç–æ—Ä–∏—Å –æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö',hint:'–®–∞–±–ª–æ–Ω',reward:15,xp:20,period:'4h',done:false,streak:0},
                    {id:3,title:'–ü—Ä–∞–∫—Ç–∏–∫–∞ –†–∏—Å—É–Ω–∫–∞',desc:'2+ —á–∞—Å–∞ —ç—Å–∫–∏–∑–æ–≤',hint:'–ö–∏–Ω–∂–∞–ª—ã –∏ –º–µ—á–∏',reward:30,xp:50,period:'daily',done:false,streak:0}
                ],
                piggyBanks: [
                    {id:'cushion', name:'–§–∏–Ω–ø–æ–¥—É—à–∫–∞', amount:0, goal:5000},
                    {id:'rent', name:'–ê—Ä–µ–Ω–¥–∞', amount:0, goal:3000}
                ],
                transactions: [],
                bookings: [],
                diary: [],
                anxietyLogs: [],
                sleepLogs: [],
                achievements: []
            };
            
            localStorage.setItem('demonDataV3', JSON.stringify(defaultData));
            alert('–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
            location.reload();
        }
    </script>
</body>
</html>
